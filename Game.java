import java.util.ArrayList;/** * the main class of SFGame * * Author:  Sascha Sturzenegger * Version: 1.0.0 * Date:    November 2020 * */public class Game {	private Parser parser;	private Room currentRoom;	private ArrayList<String> players = new ArrayList<>();	private Player curLogPlayer;	private Player player;	private boolean finished = false;	private int status;	/* Status		0 - Nicht eingeloggt		1 - Eingeloggt	 */	/**	 * Create the game and initialise its internal map.	 */	public Game() {		createRooms();		parser = new Parser();	}	/**	 * Create all the rooms and link their exits together.	 */	private void createRooms() {		Room Taverne, Toilette, Aussenbereich, Zauberladen, Waffenladen, Pfad, Stallung, Dungeonportal;		// create the rooms		Taverne = new Room("Taverne","", "Du befindest dich in der Taverne.");		Toilette = new Room("Toilette","", "Du befindest dich auf der Toilette.");		Aussenbereich = new Room("Aussenbereich","", "Du befindest dich im Aussenbereich.");		Zauberladen = new Room("Zauberladen","", "Du befindest dich im Zauberladen.");		Waffenladen = new Room("Waffenladen","", "Du befindest dich im Waffenladen.");		Pfad = new Room("Pfad","", "Du befindest dich beim Pfad.");		Stallung = new Room("Stallung","", "Du befindest dich bei der Stallung");		Dungeonportal = new Room("Dungeonportal","", "Du befindest dich am Dungeonportal");		// initialise room exits		Taverne.setExits(null, Aussenbereich, Toilette, null);		Toilette.setExits(Taverne, null, null, null);		Aussenbereich.setExits(Zauberladen, Pfad, Waffenladen, Taverne);		Zauberladen.setExits(null, null, Aussenbereich, null);		Waffenladen.setExits(Aussenbereich, null, null, null);		Pfad.setExits(Stallung, null, Dungeonportal, Aussenbereich);		Stallung.setExits(null, null, Pfad, null);		Dungeonportal.setExits(Pfad, null, null, null);		currentRoom = Aussenbereich;		players.add("lol");//Easy Entry for Admin #############################################################	}	/*l	 * Create CharBaseStats	 */	//private void createCharBaseStats(){	//	Player KriegerBaseStats, KundschafterBaseStats, MagierBaseStats;	//	//	KriegerBaseStats = new Player("Krieger", "KriegerBaseStats", 1,7,3,0,5,0,0);	//	KundschafterBaseStats = new Player("Kundschafter", "KundschafterBaseStats",1,0,7,3,3,2, 0);	//	MagierBaseStats = new Player("Magier", "MagierBaseStats", 1,0,1,7,3,5,0);	//}	private String createnewPlayer(String playerName, String playerKlasse){		switch (playerKlasse) {			case "Krieger" -> playerName = String.valueOf(new Player("Krieger", playerName, 1, 7, 3, 0, 5, 0, 0));			case "Kundschafter" -> playerName = String.valueOf(new Player("Kundschafter", playerName, 1, 0, 7, 3, 3, 2, 0));			case "Magier" -> playerName = String.valueOf(new Player("Magier", playerName, 1, 0, 1, 7, 3, 5, 0));		}		return playerName;	}	public void OverworldMap(){		System.out.println( "*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*" + "\n"+				"|																																	|" + "\n"+				"*																																	*" + "\n"+				"|				+------Compass------+																								|" + "\n"+				"*				|	  	  N			|																								*" + "\n"+				"|				|		  |			|										   +---------------+			   +---------------+	|" + "\n"+				"*				|		  |			|										   |			   |			   |			   |	*" + "\n"+				"|				| W -- -- + -- -- O |										   |  Zauberladen  |			   |    Stallung   |	|" + "\n"+				"*				|		  |			|										   |			   |			   |			   |	*" + "\n"+				"|				|		  |			|										   +---------------+			   +---------------+	|" + "\n"+				"*				|		  S			|												   |							   |			*" + "\n"+				"|				+-------------------+												   |							   |			|" + "\n"+				"*																					   |							   |			*" + "\n"+				"|																					   |							   |			|" + "\n"+				"*    		   +---------------+			   +---------------+			   +---------------+			   +---------------+	*" + "\n"+				"|    	       |			   |			   |			   |			   |			   |			   |			   |	|" + "\n"+				"*    		   | 	  ??? 	   |---------------|    Taverne    |---------------| Aussenbereich |---------------|	 Pfad	   |	*" + "\n"+				"|   		   |			   |			   |			   |			   |			   |			   |			   |	|" + "\n"+				"*			   +---------------+			   +---------------+			   +---------------+			   +---------------+	*" + "\n"+				"|					    							   |							   |							   |			|" + "\n"+				"*					    							   |							   |							   |			*" + "\n"+				"|					    							   |							   |							   |			|" + "\n"+				"*					    							   |							   |							   |			*" + "\n"+				"|			   								   +---------------+			   +---------------+			   +---------------+	|" + "\n"+				"*			   								   |			   |			   |			   |			   |			   |	*" + "\n"+				"|			   								   |   Toilette	   |			   |  Waffenladen  |			   | Dungeonportal |	|" + "\n"+				"*			                 				   |			   |			   |	           |			   |			   |	*" + "\n"+				"|											   +---------------+			   +---------------+			   +---------------+ 	|" + "\n"+				"*																																	*" + "\n"+				"|																																	|" + "\n"+				"*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*");	}	/**	 *  Main play routine.  Loops until end of play.	 */	public void play() {		//printWelcome();		currLogged();		// Enter the main command loop.  Here we repeatedly read commands and		// execute them until the game is over.		while (!finished) {			Command command = parser.getCommand();			finished = processCommand(command);		}		System.out.println("Danke fürs Spielen und vergessen Sie niemals: \nDie Sonne lacht!");	}	private void currLogged(){		Player Sturzi13 = new Player("Krieger", "Sturzi13", 1,7,3,0,5,0,0);		Sturzi13.PlayerStats();	}	/**	 * Print out the opening message for the player.	 */	private void printWelcome() {		emptyLine();		System.out.println("Willkommen in der Welt von Shakes and Fidget!");		emptyLine();		System.out.println("Bitte logge dich ein mit 'login [Name]'");		System.out.println("Wenn du noch keinen Account hast, gebe 'register [gewünschter Name] [gewünschte Klasse]'");		System.out.println("Verfügbare Klassen: Krieger, Kundschafter, Magier");	}	private void emptyLine(){		System.out.println("");	}	/**	 * Given a command, process (that is: execute) the command.	 * If this command ends the game, true is returned, otherwise false is	 * returned.	 */	private boolean processCommand(Command command) {		if (command.isUnknown()) {			emptyLine();			System.out.println("Diesen Befehl kenne ich leider nicht.");			return false;		}		String commandWord = command.getCommandWord();		String secWord = command.getSecondWord();		//Login Command		switch (commandWord) {			case "login":				if (status == 0) {					if (command.hasSecondWord()) {						if (contains(players, command.getSecondWord())) {							emptyLine();							System.out.println("Du bist nun eingeloggt.");							status = 1;							emptyLine();							//player.setPlayer(secWord);							System.out.println(secWord);							curLogPlayer.setPlayer(secWord);							System.out.println(currentRoom.longDescription());						} else {							emptyLine();							System.out.println("Dieser Name ist nicht registriert. Nutze 'register [Name] [Klasse]'");						}					} else {						emptyLine();						System.out.println("Korrekte Eingabe: 'login [Name]'");					}				} else {					emptyLine();					System.out.println("Du bist bereits eingeloggt.");				}				//Register Command				break;			case "register":				if (status == 0) {					if (command.hasSecondWord() && command.hasThirdWord()) {						if (!contains(players, command.getSecondWord())) {							if (command.getThirdWord().equals("Krieger") || command.getThirdWord().equals("Kundschafter") || command.getThirdWord().equals("Magier")) {								emptyLine();								System.out.println("Du bist nun registriert. Logge dich mit 'login [Name]' ein.");								createnewPlayer(command.getSecondWord(), command.getThirdWord());								players.add(command.getSecondWord());							} else {								emptyLine();								System.out.println("Ungültige Klasse. \nGültige Klassen: Magier, Krieger, Kundschafter");							}						} else {							emptyLine();							System.out.println("Dieser Name ist bereits registriert. Nutze 'login [Name]'");						}					} else {						emptyLine();						System.out.println("Korrekte Eingabe: 'register [Name] [Klasse]'");					}				} else {					emptyLine();					System.out.println("Du bist bereits eingeloggt.");				}				//Go Command				break;			case "go":				if (status == 1) {					emptyLine();					goRoom(command);				} else if (status == 0) {					emptyLine();					System.out.println("Bitte logge dich erst mit 'login [Name]' ein.");				}				//Quit Command				break;			case "quit":				if (status != 0) {					emptyLine();					System.out.println("Bitte logge dich erst mit 'logout' aus.");				} else {					return true;				}				//Logout Command				break;			case "logout":				if (status != 0) {					status = 0;					emptyLine();					System.out.println("Du bist nun ausgeloggt und kannst du Spiel mit 'quit' beenden.");				} else {					emptyLine();					System.out.println("Du bist bereits ausgeloggt. Nutze 'quit' um das Spiel zu beenden, oder 'login [Name]' um dich einzuloggen");				}				break;			case "myPlayer":				if (status != 0) {					emptyLine();					System.out.println(curLogPlayer);				} else {					emptyLine();					System.out.println("Bitte logge dich erst mit 'login [Name]' ein.");				}				break;		}		return false;	}	public boolean contains(ArrayList<String> array, String v) {		boolean result = false;		for(String i : array){			if(i.equals(v)){				result = true;				break;			}		}		return result;	}	/**	 * Try to go to one direction. If there is an exit, enter the new	 * room, otherwise print an error message.	 */	private void goRoom(Command command) {		// if there is no second word, we don't know where to go...		if (!command.hasSecondWord()) {			emptyLine();			System.out.println("Korrekte Eingabe: 'go [Richtung]'");		} else {			String direction = command.getSecondWord();			// Try to leave current room.			Room nextRoom = currentRoom.nextRoom(direction);			if (nextRoom == null) {				emptyLine();				System.out.println("Hier kannst du nicht durch.");			}else {				currentRoom = nextRoom;				System.out.println(currentRoom.longDescription());			}		}	}}